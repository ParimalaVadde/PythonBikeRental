# Workspace Deletion Procedure

## Prerequisites
Before starting, ensure you have:
- Necessary AWS and Terraform permissions
- Correct group memberships:
  - TFE-GOLD-<seal_id>-<deployment_id>-DEV-WSCREATOR
  - AWS-<dev_aws_account_id>-tfe-module-pave
  - TFE-GOLD-ATLAS-MODULE-REGISTRY-READ

## Detailed Deletion Steps

### 1. AWS Login
```bash
pcl aws login --region us-east-1
```

### 2. Configure Terraform for Workspace
```bash
tfl configure --org=111597-114116-DEV --workspace=<WORKSPACE_NAME> --aws-region=us-east-1
```
> **Note:** Replace `<WORKSPACE_NAME>` with the actual workspace you want to delete

### 3. Find JPM-Data Module Version
```bash
tfl state show | grep terraform/modules/jpm_data
```

### 4. Prepare Cleanup Directory
```bash
mkdir I:\ds\workspace-cleanup
cd I:\ds\workspace-cleanup
unzip jpm-data.zip
```

### 5. Update Module Version
Edit `main.tf` with the module version found in step 3

### 6. Apply Cleanup Configuration
```bash
tfl apply
```

### 7. Destroy JPM-Data Module
```bash
tfl destroy
```

### 8. Delete Workspace
```bash
tfl workspace delete <WORKSPACE_NAME>
```

## Final Verification
- Double-check all steps have been completed
- Confirm workspace has been successfully deleted
- Verify no lingering resources remain

## Troubleshooting
If you encounter any issues:
- Verify your permissions
- Check group memberships at https://ars7.jpmchase.net/admin/
- Consult your team's DevOps support if needed
