# ServiceNow Change Request Procedure
## B2B Supplier Directory Services (SEAL ID: 111597)

## Pre-Requisites
Before initiating a change request, ensure:
- Create and run notebook in lower environments
- Capture test evidence from lower environments

## Change Request Creation Process

### Step 1: Locate Previous Change Request
Find the most recent successful change request (Reference: CHG35514839)

### Step 2: Access Previous Change Request
Open the previous change request in ServiceNow

### Step 3: Create New Change Request
Click on "Copy Change" to create a new change request based on the previous one

### Step 4: Update Required Fields
Ensure the following fields are properly updated:

**Critical Naming Convention:**  
Short Description and Description must begin with:
- `"CommercialCard Client-Impact=N <APP-NOT-LIVE> - B2B Supplier Directory Services (111597) - "`
- Note: Update `Client-Impact` and `<APP-NOT-LIVE>` accordingly once app is live in production

**Sample Format:**  
- **Short Description:** "CommercialCard Client-Impact=N <APP-NOT-LIVE> - B2B Supplier Directory Services (111597) - Upgrade VPC Endpoints via Spinnaker to AWS Production environment"

- **Description:** Follow this exact format:  
  CommercialCard Client-Impact=N <APP-NOT-LIVE> - B2B Supplier Directory Services (111597) - Upgrade VPC Endpoints via Spinnaker to AWS Production environment
  
  Impacted Platform: XBSD SEAL ID: 111597  
  Impacted Application - B2B Payables X-Business Supplier Directory Services
  
  What is the change doing: [Describe specific changes]
  
  Why is the change needed: [Explain business/technical justification]
  
  Impacts to downstream applications(Blast Radius): [Detail any impacts]
  
  Impact to users(Blast Radius): [Detail any user impacts]
  
  Worst case scenario if the change goes bad: [Describe worst-case outcomes]
  
  How do we react and adjust to protect against worst case scenario: [Detail contingency plan]

### Step 5: Release Attestation
Set "Release Attestation" field to "Yes" for code-related changes (infrastructure or functional)

### Step 6: Field Review
Thoroughly review all other fields from the previous change request and update as needed

### Step 7: Create Change Tasks
Create the following tasks:
1. UTA Sign-off
2. Pre-implementation validation (optional)
3. Implementation (create 2 implementation tasks for CCTOPS)
4. Post-implementation validation

Reference previous change tasks for proper formatting and assignment

### Step 8: Change Request Review
Have the change request reviewed by appropriate team members

### Step 9: Submit for Approval
Click on "Access" then "Request Authorize" to submit the change request for approval

## Implementation Process

### Step 10: Coordination with Implementation Team
- Set up call with CCTOPS implementation team
- Contact: is_pradeep_shukla@restricted.chase.com, Commercial Card Prod Support Tech
- Have the run book reviewed by the team

### Step 11: Production Implementation
On implementation day, follow these steps to promote changes from lower environments to production:

#### a) Branch Management
1. Create feature branch to be merged with master
2. Clone the feature branch:
   ```
   git clone -b <feature_branch_name> <ssh link>
   git switch <feature_branch_name>
   ```

#### b) Execution Steps
Open VS Code and execute these commands in terminal:
1. `eac model validate -f <model_file_name>`
2. `eac model apply -f <model_file_name>`
3. `eac deployment plan -f <deployment_file_name>`
4. `eac deployment preflight -f <deployment_file_name>`
5. `eac config set -b <feature_branch_name>`
6. `eac config set -r "ssh://git@bitbucketdc-ssh.jpmchase.net:7999/xbsd/xbsd-base.git"`
7. `eac config set -c <get the commit msg from dev team>`
8. `eac config set -p <feature_branch_name>`
9. `eac config set -f <feature_branch_name>`
10. `eac deployment pipeline init -f <deployment_file_name>`
11. `eac deployment apply -f <deployment_file_name>`

Note: When running the apply command, you'll need to provide the lower environment deployment file name and lower environment Spinnaker pipeline name.

#### c) Build Monitoring
- Monitor the build using Spinnaker at: https://spinnaker.prod.aws.jpmchase.net/#/applications/111597_xbsd-base/executions
- Login with your SID and credentials
- Monitor the build progress and provide inputs on test validation completion when requested

#### d) Quality Control & Promotion
1. After successful completion of the test environment build in Spinnaker UI, a JET ID will be created
2. Navigate to the Quality tab, select the test, and upload evidence
3. Go to Continuous Delivery and click on Promote
4. The change will go to Review status
5. After authorization and approval, the change will enter Implement state

#### e) Production Deployment
Deploy to production environment in Spinnaker either:
- Manually triggering the pipeline, or
- Running the commands

## Reference Resources
- Pipeline triggering troubleshooting: https://engineers.jpmchase.net/docs/jet/deploy-and-operate/jet-spinnaker/concepts/separating-ci-and-cd/pipeline-triggering-troubleshooting/
- Deploy to production documentation: https://engineers.jpmchase.net/community/tools/eac/eacv2/tech-primers/deploy-to-prod/

## Latest Reference Information
- Most recent change request: CHG35514839
- Reference URL: https://jpmorganchase.service-now.com/now/nav/ui/classic/params/target/change_request.do%3Fsys_id%3D5a512bab973ce25814c151b00153af6f%26sysparm_domain%3Dnull%26sysparm_domain_scope%3Dnull%26sysparm_view%3D%26sysparm_view_forced%3Dtrue
