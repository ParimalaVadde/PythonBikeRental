"In aws console
   a) Use go/awsconsole to access the AWS console.
   b) Select role for PRD env
   c) Select following step function (pcsre-CleanupTfeResources)
   d) paste the below json and execute it

{
  ""account"": ""992382575964"",
  ""resource_list"": [
    ""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-067272ef7f165fa42"",
	""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-026030a141b1ea6bb"",
	""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-0f8792e23b4e7d60c"",
	""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-06b4d638457c39970"",
	""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-018e501ba55995709"",
	""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-0382b22e92b1b0d0a"",
	""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-00a8950594c75e596"",
	""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-0423ed091ef71a868"",
	""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-0deab8148a6fb0bc8"",
	""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-0ed069ea24f7caa49"",
	""arn:aws:ec2:us-east-1:992382575964:vpc-endpoint/vpce-05f62e7ec5f5dee51""	
  ],
  ""aws_regions"": [""us-east-1""],
  ""dry_run"": false   
}"
"Execute below commands to login into AWS and to select desired role:
   a) `pcl aws login -s`
   b) Choose the role ""AWS-992382575964-tfe-module-pave"""
"a) Get the feature branch details from development team
b) Clone the feature branch:
   i) `git clone -b <feature_branch_name> ssh://git@bitbucketdc-ssh.jpmchase.net:7999/xbsd/xbsd-base.git`
   ii) git switch <feature branch name>"
"1) ASK development team to verify the code of all YAML files.
2).ensure deployment file need to be updated with PROD details
    a. awsAccountID and tfeOrganization (Under Environment)
    b. certificate_arn (Under Properties)
    c. id (postgressql cluster Under Properties)"
"Execute these commands in presence of dev team:
   a) `eac model validate -f <model_file_name>`
   b) `eac model apply -f <model_file_name>`
   c) `eac deployment plan -f <deployment_file_name>`
   d) `eac deployment preflight -f <deployment_file_name>`
   e) `eac config set -b <feature_branch_name>`
   f) `eac config set -r ""ssh://git@bitbucketdc-ssh.jpmchase.net:7999/xbsd/xbsd-base.git""`
   g) `eac config set -c <get the commit msg from dev team>`
   h) `eac config set -p <feature_branch_name>`
   i) `eac config set -f <feature_branch_name>`
   j) `eac deployment pipeline init -f <deployment_file_name>`
   h) `eac deployment apply -f <deployment_file_name>`"
"If preflight, plan or deploy errors out, try -
A. Check if the model file has applied in the prior step correctly.
B. In the prod environment, ensure that mutable is set to 'False' in model file
C. Reach out the the AppDev team"
"The build link can be obtained from below link

""https://spinnaker.prod.aws.jpmchase.net/#/applications/111597_xbsd-base/executions""  - to view the status of deployment - 

1. Login into the spinnaker using your SID and credentials
2. Monitor the spinnaker build to ensure its completion and provide inputs on test validation completion for build to proceed further whenever requested."
"If build encounter an error, perform the following steps - 
1. Login into the spinnaker using your SID and credentials
2. Click on the build that failed on the bottom left corner (Use https://spinnaker.prod.aws.jpmchase.net/#/applications/111597_xbsd-base/executions)
3. On the left pane click on the console output to check the log and view the error
(OR)
1. Goto go/eacui
2. From the drop down list, select CIB - Corporate and Investment Bank
3. Select the 111597 B2B Supplier Directory from the list
4. Under Environments, select          icon from beside the relevant deploy file name

5. Click on the pipelines tab to check the status"
Check on go/eacui the Base component is available and all the pipeline tasks are in green.
"Send an email to the DEV team with the validation status.

In case of any failures:
1. The DEV team should analyze and rectify the error, and re-raise the pull request.
2. The DEV team should be allowed to rectify and re-raise the pull request up to three times.
3. The deployment team should merge the re-raised pull request with master."
